import { Task, ContextItem } from '../types';

// Helper to create unique IDs
let idCounter = 0;
const createId = () => `item-${idCounter++}`;

// Customer Service Task
const customerServiceItems: ContextItem[] = [
  {
    id: createId(),
    type: 'system_prompt',
    name: 'System Prompt',
    description: 'Instructions for the customer service agent',
    content: 'You are a helpful customer service agent. Be polite, professional, and resolve issues efficiently.',
    tokenCount: 25,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'instructions',
    name: 'Comprehensive Instructions',
    description: 'Detailed guidelines for handling various customer scenarios',
    content: 'Handle refunds, exchanges, complaints, and general inquiries. Always verify customer identity first...',
    tokenCount: 1200,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'doc',
    name: 'Refund Policy',
    description: 'Complete refund policy documentation',
    content: 'Our refund policy allows returns within 30 days of purchase for most items...',
    tokenCount: 5000,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'doc',
    name: 'Product Catalog',
    description: 'Full product catalog with specifications',
    content: 'Complete listing of all products with details, pricing, and availability...',
    tokenCount: 100000,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'doc',
    name: 'FAQ Database',
    description: 'Frequently asked questions and answers',
    content: 'Q: How do I track my order? A: Use your order number on our tracking page...',
    tokenCount: 25000,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'memory_file',
    name: 'Policy Summary',
    description: 'Condensed version of all policies',
    content: 'Key policies: 30-day returns, free shipping over $50, 24/7 support...',
    tokenCount: 500,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'tool',
    name: 'Product Search',
    description: 'Search product catalog in real-time',
    content: 'Function to search products by name, category, or SKU',
    tokenCount: 150,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'tool',
    name: 'Order Lookup',
    description: 'Retrieve order details by order ID',
    content: 'Function to fetch order status, shipping info, and line items',
    tokenCount: 200,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'tool',
    name: 'Customer Profile',
    description: 'Access customer account information',
    content: 'Function to retrieve customer details, order history, and preferences',
    tokenCount: 180,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'tool',
    name: 'Refund Processor',
    description: 'Initiate refund for an order',
    content: 'Function to process refunds and send confirmation',
    tokenCount: 220,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'tool',
    name: 'Shipping Tracker',
    description: 'Get real-time shipping status',
    content: 'Function to track package location and estimated delivery',
    tokenCount: 160,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'tool',
    name: 'FAQ Search',
    description: 'Search FAQ database',
    content: 'Function to find relevant FAQ entries',
    tokenCount: 140,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'domain_knowledge',
    name: 'Product Categories',
    description: 'Overview of product categories and relationships',
    content: 'Electronics, Clothing, Home & Garden, Sports & Outdoors...',
    tokenCount: 800,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'user_message',
    name: 'User Message',
    description: 'Current customer query',
    content: "Hi, I'd like to return a product I purchased last week",
    tokenCount: 15,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'message_history',
    name: 'Message History',
    description: 'Previous conversation turns',
    content: 'Past messages in this conversation (grows over time)',
    tokenCount: 2000,
    cacheable: false,
  },
];

// Financial Analysis Task
const financialAnalysisItems: ContextItem[] = [
  {
    id: createId(),
    type: 'system_prompt',
    name: 'System Prompt',
    description: 'Instructions for financial analyst',
    content: 'You are an expert financial analyst. Provide accurate, data-driven insights.',
    tokenCount: 30,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'instructions',
    name: 'Analysis Framework',
    description: 'Methodology for financial analysis',
    content: 'Follow standard financial analysis frameworks: ratio analysis, trend analysis...',
    tokenCount: 2000,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'doc',
    name: 'Market Data (Q4 2024)',
    description: 'Recent market trends and indicators',
    content: 'Stock prices, indices, sector performance, volatility metrics...',
    tokenCount: 50000,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'doc',
    name: 'Historical Trends (5Y)',
    description: 'Five years of historical market data',
    content: 'Long-term trends, seasonal patterns, correlation data...',
    tokenCount: 150000,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'doc',
    name: 'Regulatory Guidelines',
    description: 'SEC and compliance requirements',
    content: 'Regulation requirements, disclosure rules, compliance frameworks...',
    tokenCount: 30000,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'memory_file',
    name: 'Market Summary',
    description: 'Pre-computed market insights',
    content: 'Key market indicators: S&P up 12% YTD, tech sector leading, inflation trending down...',
    tokenCount: 1000,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'memory_file',
    name: 'Risk Metrics',
    description: 'Pre-calculated risk assessments',
    content: 'VaR calculations, beta values, correlation matrices for major assets...',
    tokenCount: 1500,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'tool',
    name: 'Portfolio Analysis',
    description: 'Calculate portfolio metrics',
    content: 'Function to compute returns, risk, and performance metrics',
    tokenCount: 300,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'tool',
    name: 'Risk Calculator',
    description: 'Compute risk metrics',
    content: 'Function to calculate VaR, CVaR, and other risk measures',
    tokenCount: 350,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'tool',
    name: 'Market Data Fetcher',
    description: 'Retrieve real-time market data',
    content: 'Function to get current prices, volumes, and market indicators',
    tokenCount: 250,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'tool',
    name: 'Report Generator',
    description: 'Create formatted analysis reports',
    content: 'Function to generate PDF/Excel reports with charts',
    tokenCount: 400,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'domain_knowledge',
    name: 'Financial Ratios',
    description: 'Key financial ratios and their interpretations',
    content: 'P/E ratio, ROE, debt-to-equity, current ratio...',
    tokenCount: 1500,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'user_message',
    name: 'User Message',
    description: 'Analysis request',
    content: 'Analyze the risk profile of my tech-heavy portfolio and suggest rebalancing strategies',
    tokenCount: 20,
    cacheable: false,
  },
];

// Code Review Task
const codeReviewItems: ContextItem[] = [
  {
    id: createId(),
    type: 'system_prompt',
    name: 'System Prompt',
    description: 'Instructions for code reviewer',
    content: 'You are an expert code reviewer. Focus on code quality, security, and best practices.',
    tokenCount: 28,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'instructions',
    name: 'Review Guidelines',
    description: 'Code review checklist and standards',
    content: 'Check for security vulnerabilities, performance issues, code style, test coverage...',
    tokenCount: 1800,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'doc',
    name: 'Style Guide',
    description: 'Team coding standards',
    content: 'TypeScript style guide: naming conventions, formatting, best practices...',
    tokenCount: 8000,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'doc',
    name: 'Security Checklist',
    description: 'Security requirements and common vulnerabilities',
    content: 'OWASP top 10, input validation, authentication patterns...',
    tokenCount: 12000,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'doc',
    name: 'Main.tsx (PR)',
    description: 'Changed file 1',
    content: 'import React from "react"...\n// 500 lines of code',
    tokenCount: 15000,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'doc',
    name: 'UserService.ts (PR)',
    description: 'Changed file 2',
    content: 'class UserService {\n  async getUser()...\n// authentication logic',
    tokenCount: 10000,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'doc',
    name: 'Database.ts (Context)',
    description: 'Related file for context',
    content: 'Database connection and query logic referenced by UserService',
    tokenCount: 8000,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'memory_file',
    name: 'Common Patterns',
    description: 'Condensed style guide essentials',
    content: 'Key rules: use const/let, functional components, async/await, prop types...',
    tokenCount: 600,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'tool',
    name: 'Git Diff',
    description: 'View file changes',
    content: 'Function to get diff of changed files',
    tokenCount: 180,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'tool',
    name: 'Lint Runner',
    description: 'Run linting on code',
    content: 'Function to execute ESLint and return violations',
    tokenCount: 200,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'tool',
    name: 'File Reader',
    description: 'Read any file from repository',
    content: 'Function to fetch file contents by path',
    tokenCount: 150,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'tool',
    name: 'Test Coverage',
    description: 'Get test coverage metrics',
    content: 'Function to retrieve coverage percentages',
    tokenCount: 170,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'domain_knowledge',
    name: 'Architecture Overview',
    description: 'System architecture and patterns',
    content: 'MVC pattern, service layer, repository pattern...',
    tokenCount: 2000,
    cacheable: true,
  },
  {
    id: createId(),
    type: 'user_message',
    name: 'User Message',
    description: 'PR description',
    content: 'Please review PR #123: Add user authentication with JWT tokens',
    tokenCount: 18,
    cacheable: false,
  },
  {
    id: createId(),
    type: 'message_history',
    name: 'Message History',
    description: 'Discussion on the PR',
    content: 'Previous comments and discussions about this code review',
    tokenCount: 3000,
    cacheable: false,
  },
];

export const TASKS: Task[] = [
  {
    id: 'customer-service',
    name: 'Real-time Customer Service',
    description: 'Handle customer inquiries with fast response times (<2s)',
    category: 'realtime',
    availableItems: customerServiceItems,
    optimalConfig: {
      tokenRange: [3000, 15000],
      cacheRateMin: 0.6,
      requiredItems: [customerServiceItems[0].id, customerServiceItems[13].id],
    },
  },
  {
    id: 'financial-analysis',
    name: 'Financial Analysis',
    description: 'Deep portfolio analysis where accuracy is paramount',
    category: 'longrunning',
    availableItems: financialAnalysisItems,
    optimalConfig: {
      tokenRange: [10000, 80000],
      cacheRateMin: 0.4,
      requiredItems: [financialAnalysisItems[0].id],
    },
  },
  {
    id: 'code-review',
    name: 'Code Review Assistant',
    description: 'Review pull requests for quality and security',
    category: 'batch',
    availableItems: codeReviewItems,
    optimalConfig: {
      tokenRange: [5000, 50000],
      cacheRateMin: 0.5,
      requiredItems: [codeReviewItems[0].id],
    },
  },
];
